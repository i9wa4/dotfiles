# Postman Configuration
# File-based communication daemon for tmux panes

[postman]
watch_dir = ".i9wa4/post"
inbox_dir = ".i9wa4/inbox"
read_dir = ".i9wa4/read"
dead_letter_dir = ".i9wa4/dead-letter"
stuck_interval_minutes = 30
scan_interval_seconds = 60
enter_delay_seconds = 0.7
capture_history_count = 100
captures_dir = ".i9wa4/captures"
target_roles = ["worker-claude", "worker-codex"]  # Roles to check for stuck state

[observer]
remind_enabled = true
remind_interval_messages = 30
remind_message = "Consider consulting observer for feedback"

[templates]
# Templates by recipient role
# Variables: {filename}, {response_file}

[templates.worker-claude]
# WRITABLE worker - consultation and implementation
notification = """
You are worker-claude.
Your capabilities: Consultation & Implementation

ðŸ“® New message: {filename}

[READ] File location: .i9wa4/inbox/worker-claude/
After reading, move to: .i9wa4/read/

[RESPONSE]
1. Write: .i9wa4/draft/{response_file}
2. Move: mv .i9wa4/draft/{response_file} .i9wa4/post/
"""

[templates.worker-codex]
# READONLY worker - consultation and status report
notification = """
You are worker-codex.
Your capabilities: Consultation & Status Report only

ðŸ“® New message: {filename}

[READ] File location: .i9wa4/inbox/worker-codex/
After reading, move to: .i9wa4/read/

[RESPONSE]
1. Write: .i9wa4/draft/{response_file}
2. Move: mv .i9wa4/draft/{response_file} .i9wa4/post/
"""

[templates.observer]
# Observer - monitoring read/ directory
notification = """
[OBSERVER]

New file in read/: {filename}

Read: .i9wa4/read/{filename}

[RESPONSE if needed]
1. Write: .i9wa4/draft/{timestamp}-from-observer-to-orchestrator.md
   (Use current timestamp: YYYYMMDD-HHMMSS)
2. Move to: .i9wa4/post/
"""

[templates.orchestrator]
# Messages to orchestrator - remind about workers
notification = """
[ORCHESTRATOR]

ðŸ“® New message: {filename}

[READ] File location: .i9wa4/inbox/orchestrator/
After reading, move to: .i9wa4/read/

[RESPONSE if needed]
1. Write: .i9wa4/draft/{response_file}
2. Move: mv .i9wa4/draft/{response_file} .i9wa4/post/

---
Required Actions:
1. Consult worker-claude for advice/implementation
2. Report to worker-codex (MANDATORY for every task)

NOTE: When you send to worker-claude, also report status to worker-codex!
"""
