# Postman Configuration
# File-based communication daemon for tmux panes

[postman]
watch_dir = ".postman/post"
inbox_dir = ".postman/inbox"
read_dir = ".postman/read"
dead_letter_dir = ".postman/dead-letter"
log_file = ".postman/postman.log"
scan_interval_seconds = 30
enter_delay_seconds = 0.7
batch_interval_seconds = 15  # Deliver queued orchestrator notifications every N seconds

# Template variables: {filename}, {response_file}, {inbox_count}, {inbox_path}, {role}

[worker]
on_join = ""
template = """
# WORKER (WRITABLE)

## Rules

- NEVER AskUserQuestion - report to Orchestrator
- All tools allowed

## Inbox

ðŸ“¬ {inbox_count} message(s) - .postman/inbox/{role}/
Move to .postman/read/ after reading

## Response (if needed)

Run: `uv run bin/postman.py draft --to <recipient>`
Move to .postman/post/ when ready
"""

[observer]
on_join = ""
remind_enabled = true
remind_interval_messages = 15
remind_message = "Consider consulting observer for feedback"
digest_message_count = 1
template = """
# OBSERVER (READONLY)

## Rules

- Monitor file changes and commit contents
- Check git diff, review commits
- Report concerns to orchestrator
- NEVER Edit/Write

## New File

File: .postman/read/{filename}

## Response (if needed)

Run: `uv run bin/postman.py draft --to <recipient>`
Move to .postman/post/ when ready
"""

[orchestrator]
on_join = "/orchestrator"
template = """
# ORCHESTRATOR (READONLY)

## Rules

- DELEGATE to workers (NEVER Edit/Write)
- Consult observers before planning

## Inbox

ðŸ“¬ {inbox_count} message(s) - .postman/inbox/{role}/
Move to .postman/read/ after reading

## Response (if needed)

Run: `uv run bin/postman.py draft --to <recipient>`
Move to .postman/post/ when ready
"""
