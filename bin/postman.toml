# Postman Configuration
# File-based communication daemon for tmux panes

[postman]
watch_dir = ".postman/post"
inbox_dir = ".postman/inbox"
read_dir = ".postman/read"
dead_letter_dir = ".postman/dead-letter"
stuck_interval_minutes = 30
scan_interval_seconds = 60
enter_delay_seconds = 0.7
capture_history_count = 100
captures_dir = ".i9wa4/captures"
target_roles = ["worker-claude", "worker-codex"]  # Roles to check for stuck state

[observer]
remind_enabled = true
remind_interval_messages = 30
remind_message = "Consider consulting observer for feedback"
digest_message_count = 1

[templates]
# Templates by recipient role
# Variables: {filename}, {response_file}

[templates.worker]
notification = """
[WORKER] (WRITABLE)
Constraints: NEVER AskUserQuestion - report to Orchestrator
Allowed: All tools

ðŸ“® New message: {filename}

[READ] File location: .postman/inbox/worker/
After reading, move to: .postman/read/

[RESPONSE]
Response file: .postman/draft/{response_file}
1. Edit the response file above with your response
2. Move: mv .postman/draft/{response_file} .postman/post/
"""

[templates.observer]
notification = """
[OBSERVER] (READONLY)
Role: Monitor file changes and commit contents
- Check git diff for uncommitted changes
- Review recent commits (git log)
- Report concerns to orchestrator

Constraints: NEVER Edit/Write - monitoring and feedback only
Allowed: Read, Glob, Grep, Bash(ro), .i9wa4/ write

New file in read/: {filename}

Read: .postman/read/{filename}

[RESPONSE if needed]
1. Create: .postman/draft/yyyymmdd-hhmmss-from-observer-to-orchestrator.md
2. Move: mv .postman/draft/<filename> .postman/post/
"""

[templates.orchestrator]
notification = """
[ORCHESTRATOR] (READONLY)
Constraints: NEVER Edit/Write - DELEGATE to workers
Allowed: Read, Glob, Grep, Bash(ro), .i9wa4/ write

[SKILL] Invoke /orchestrator for workflow guidance.

ðŸ“® New message: {filename}

[READ] File location: .postman/inbox/orchestrator/
After reading, move to: .postman/read/

[STATUS] Update .i9wa4/tmp/status-pane${TMUX_PANE#%} after each action:
CURRENT: <what was done> | <mood> <emoji>
NEXT: <what is needed to continue>

[RESPONSE if needed]
Response file: .postman/draft/{response_file}
1. Edit the response file above with your response
2. Move: mv .postman/draft/{response_file} .postman/post/

---
Tip: Consider consulting observers when planning or making decisions.
"""
