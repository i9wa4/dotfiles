# dotfiles

[![DeepWiki](https://img.shields.io/badge/DeepWiki-i9wa4%2Fdotfiles-blue.svg?logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAyCAYAAAAnWDnqAAAAAXNSR0IArs4c6QAAA05JREFUaEPtmUtyEzEQhtWTQyQLHNak2AB7ZnyXZMEjXMGeK/AIi+QuHrMnbChYY7MIh8g01fJoopFb0uhhEqqcbWTp06/uv1saEDv4O3n3dV60RfP947Mm9/SQc0ICFQgzfc4CYZoTPAswgSJCCUJUnAAoRHOAUOcATwbmVLWdGoH//PB8mnKqScAhsD0kYP3j/Yt5LPQe2KvcXmGvRHcDnpxfL2zOYJ1mFwrryWTz0advv1Ut4CJgf5uhDuDj5eUcAUoahrdY/56ebRWeraTjMt/00Sh3UDtjgHtQNHwcRGOC98BJEAEymycmYcWwOprTgcB6VZ5JK5TAJ+fXGLBm3FDAmn6oPPjR4rKCAoJCal2eAiQp2x0vxTPB3ALO2CRkwmDy5WohzBDwSEFKRwPbknEggCPB/imwrycgxX2NzoMCHhPkDwqYMr9tRcP5qNrMZHkVnOjRMWwLCcr8ohBVb1OMjxLwGCvjTikrsBOiA6fNyCrm8V1rP93iVPpwaE+gO0SsWmPiXB+jikdf6SizrT5qKasx5j8ABbHpFTx+vFXp9EnYQmLx02h1QTTrl6eDqxLnGjporxl3NL3agEvXdT0WmEost648sQOYAeJS9Q7bfUVoMGnjo4AZdUMQku50McDcMWcBPvr0SzbTAFDfvJqwLzgxwATnCgnp4wDl6Aa+Ax283gghmj+vj7feE2KBBRMW3FzOpLOADl0Isb5587h/U4gGvkt5v60Z1VLG8BhYjbzRwyQZemwAd6cCR5/XFWLYZRIMpX39AR0tjaGGiGzLVyhse5C9RKC6ai42ppWPKiBagOvaYk8lO7DajerabOZP46Lby5wKjw1HCRx7p9sVMOWGzb/vA1hwiWc6jm3MvQDTogQkiqIhJV0nBQBTU+3okKCFDy9WwferkHjtxib7t3xIUQtHxnIwtx4mpg26/HfwVNVDb4oI9RHmx5WGelRVlrtiw43zboCLaxv46AZeB3IlTkwouebTr1y2NjSpHz68WNFjHvupy3q8TFn3Hos2IAk4Ju5dCo8B3wP7VPr/FGaKiG+T+v+TQqIrOqMTL1VdWV1DdmcbO8KXBz6esmYWYKPwDL5b5FA1a0hwapHiom0r/cKaoqr+27/XcrS5UwSMbQAAAABJRU5ErkJggg==)](https://deepwiki.com/i9wa4/dotfiles)
<!-- DeepWiki badge generated by https://deepwiki.ryoppippi.com/ -->

## 1. Target OS

- macOS
- Ubuntu 24.04 LTS
- Ubuntu 24.04 LTS (Windows, WSL2)

## 2. OS-specific Pre Installation

### 2.1. Windows

1. Install WSL2 and Ubuntu.
    - <https://learn.microsoft.com/en-us/windows/wsl/install>
    - <https://i9wa4.github.io/blog/2024-03-25-setup-wsl2.html>
1. Launch Ubuntu with PowerShell.

    ```dosbat
    wsl
    ```

## 3. Installation

1. Establish an SSH connection to GitHub.
    - <https://qiita.com/ucan-lab/items/e02f2d3a35f266631f24>
1. Add the GitHub Signing Keys and Authentication Keys.
    - <https://qiita.com/habu1010/items/dbd59495a68a0b9dc953>
1. Execute a git command to install Command Line Developer Tools.

    ```sh
    git --version
    ```

1. Execute the following command.

    ```sh
    git clone git@github.com:i9wa4/dotfiles ~/ghq/github.com/i9wa4/dotfiles \
    && cd ~/ghq/github.com/i9wa4/dotfiles \
    && _uname="$$(uname -a)"; \
    if [ "$$(echo "$${_uname}" | grep Darwin)" ]; then \
      echo 'Hello, macOS!'; \
      make mac-init; \
    elif [ "$$(echo "$${_uname}" | grep Ubuntu)" ]; then \
      echo 'Hello, Ubuntu'; \
      sudo apt install -y make; \
      make ubuntu-server-init; \
    elif [ "$$(echo "$${_uname}" | grep WSL2)" ]; then \
      echo 'Hello, WSL2!'; \
      sudo apt install -y make; \
      make wsl-init; \
    elif [ "$$(echo "$${_uname}" | grep arm)" ]; then \
      echo 'Hello, Raspberry Pi!'; \
    elif [ "$$(echo "$${_uname}" | grep el7)" ]; then \
      echo 'Hello, CentOS!'; \
    else \
      echo 'Which OS are you using?'; \
    fi
    ```

1. Restart the terminal and execute the following command.

    ```sh
    cd ~/ghq/github.com/i9wa4/dotfiles && make common-package-init
    ```

## 4. OS-specific Post Installation

### 4.1. Windows

1. Run `C:\work\util\bin\win-copy.bat`.
1. Run `C:\work\util\bin\winget-upgrade.bat`.

### 4.2. macOS

[Mac 環境構築手順 – uma-chan’s page](https://i9wa4.github.io/blog/2024-06-17-setup-mac.html)

## 5. OS-common Post Installation

### 5.1. AWS CLI

- Authentication with AWS CLI
    - [Configuring IAM Identity Center authentication with the AWS CLI - AWS Command Line Interface](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html)
- `~/.aws/config`
    - [Configuration and credential file settings in the AWS CLI - AWS Command Line Interface](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html)
- `~/.aws/credentials`
    - [Authenticating using IAM user credentials for the AWS CLI - AWS Command Line Interface](https://docs.aws.amazon.com/cli/latest/userguide/cli-authentication-user.html)
    - Follow the instroctions of "Access Keys".

### 5.2. gh

1. Choose SSH for Git operation protocol.
1. Skip uploading SSH public key.
1. Login with a web browser: <https://github.com/login/device>.

### 5.3. Web Browser

#### 5.3.1. Setting Synchronization

- Password: No
- Address: No
- Google Pay: No
- The Others: Yes

#### 5.3.2. Search Engine

- Google Japanese Search
    - `https://www.google.com/search?q=%s`
- Google English Search
    - `https://www.google.com/search?q=%s&gl=us&hl=en&gws_rd=cr&pws=0`
- DuckDuckGo Japanese Search
    - `https://duckduckgo.com/?q=%s&kl=jp-jp&kz=-1&kav=1&kaf=1&k1=-1&ia=web`
- DuckDuckGo English Search
    - `https://duckduckgo.com/?q=%s&kl=us-en&kz=-1&kav=1&kaf=1&k1=-1&ia=web`

#### 5.3.3. Extension

- Flow Chat for YouTube Live
- Markdown Preview Plus

### 5.4. Slack

- GitHub Notifications
    - `/github subscribe owner/repo reviews,comments,branches,commits:*`

### 5.5. SSH Connection to Ubuntu Server

cf. [Linux サーバー：SSH 設定（2024年7月更新）](https://zenn.dev/wsuzume/articles/26b26106c3925e)

1. [Server] Set `PasswordAuthentication yes` in `/etc/ssh/sshd_config`.
1. [Server] Restart ssh.

    ```sh
    [Server] $ sudo systemctl restart ssh.service
    ```
1. Execute the following commands.

    ```sh
    [Client] $ ssh-keygen -t ed25519
    [Client] $ ssh -p port username@192.168.xxx.xxx  # or hostname
    [Server] $ exit
    [Client] $ scp -P port ~/.ssh/id_ed25519.pub username@hostname:~/.ssh/register_key
    [Client] $ ssh -p port username@192.168.xxx.xxx
    [Server] $ cd ~/.ssh
    [Server] $ cat register_key >> authorized_keys
    [Server] $ chmod 600 authorized_keys
    [Server] $ rm register_key
    ```

1. [Server] Set `PasswordAuthentication no` in `/etc/ssh/sshd_config`.
1. [Server] Restart ssh.

    ```sh
    [Server] $ sudo systemctl restart ssh.service
    ```

1. [Client] Configure `~/.ssh/config`

    ```sh
    Host sandbox
        HostName        192.168.xxx.xxx
        Port            port
        IdentityFile    ~/.ssh/id_ed25519
        User            username
    ```
