#!/usr/bin/env bash
set -o errexit
set -o nounset
set -o pipefail
set -o posix

# Set up repository environment for development.
# Creates local.vim, .i9wa4/ directory, and trusts mise.toml.
#
# Usage:
#   repo-setup
#
# Created files:
#   - local.vim: Vim local configuration
#   - .i9wa4/: Working directory (gitignored globally)
#   - .i9wa4/temp.md: Template file for notes

# Create local.vim
cat >local.vim <<'EOF'
" ~/ghq/github.com/i9wa4/dotfiles/dot.config/vim/rc/local.default.vim
let g:mnh_header_level_shift = 1
let g:my_tp_path = '.i9wa4/temp.md'->expand()
EOF
echo "* Created local.vim"

# Create .i9wa4/ directory
mkdir -p .i9wa4/
echo "* Created .i9wa4/ directory"

# Create template file
cat >.i9wa4/temp.md <<'EOF'
# temp

## Common

/CONTRIBUTING

## Claude Code

## Codex CLI

## Review

/CONTRIBUTING
/my-review
/summarize-reviews
EOF

# Trust mise.toml if exists
if [[ -f "mise.toml" ]]; then
  mise trust mise.toml
  echo "* Trusted mise.toml"
fi

echo "* Setup complete"
