# Postman Configuration
# File-based communication daemon for tmux panes

[postman]
watch_dir = ".postman/post"
inbox_dir = ".postman/inbox"
read_dir = ".postman/read"
dead_letter_dir = ".postman/dead-letter"
log_file = ".postman/postman.log"
scan_interval_seconds = 30
enter_delay_seconds = 0.7
batch_interval_seconds = 15  # Deliver queued orchestrator notifications every N seconds

# Template variables: {filename}, {response_file}, {inbox_count}, {inbox_path}, {role}

[worker]
on_join = ""
template = """
## WORKER (WRITABLE)

- NEVER AskUserQuestion - report to Orchestrator
- All tools allowed

## Inbox

ðŸ“¬ {inbox_count} message(s) - .postman/inbox/{role}/
Move each file to .postman/read/ immediately after reading

## Response (if needed)

File: .postman/draft/{response_file}
1. Edit the response file with your response
2. Move: `mv .postman/draft/{response_file} .postman/post/`
"""

[observer]
on_join = ""
remind_enabled = true
remind_interval_messages = 15
remind_message = "Consider consulting observer for feedback"
digest_message_count = 1
template = """
## OBSERVER (READONLY)

- Monitor file changes and commit contents
- Check git diff for uncommitted changes
- Review recent commits (git log)
- Report concerns to orchestrator
- NEVER Edit/Write - monitoring and feedback only

## New File

File: .postman/read/{filename}

## Response (if needed)

1. Create: .postman/draft/yyyymmdd-hhmmss-from-{role}-to-orchestrator.md
2. Move: `mv .postman/draft/<filename> .postman/post/`
"""

[orchestrator]
on_join = "/orchestrator"
template = """
## ORCHESTRATOR (READONLY)

- NEVER Edit/Write - DELEGATE to workers
- Consult observers before planning or design decisions

## Inbox

ðŸ“¬ {inbox_count} message(s) - .postman/inbox/{role}/
Move each file to .postman/read/ immediately after reading

## Response (if needed)

File: .postman/draft/{response_file}
1. Edit the response file with your response
2. Move: `mv .postman/draft/{response_file} .postman/post/`
"""
